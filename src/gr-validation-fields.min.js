angular.module("grValidation.provider").factory("$grValidation.fields",["$injector","$timeout","$compile",function(e,t,a){var n={checkbox:{template:"checkbox",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value="true"===e||e===!0||"1"===e||1===e?!0:!1,t.model.$setViewValue(t.value),t.input.val(t.value),a(t.input.attr({"ng-checked":t.value}))(t.scope))},defaultData:function(e,t){"string"==typeof e&&(t.default.checked="true"===e||e===!0||"1"===e||1===e?!0:!1)},attrs:function(e,t){t.default.value=t.default.checked,a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"ng-checked":t.default.checked,"ng-model":t.$modelName(t.name),"ng-true-value":!0,"ng-false-value":!1}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType}}},reset:function(e,t){a(t.input.attr("ng-checked",t.default.checked))(t.scope)}},color:{template:"color",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},datetime:{template:"datetime",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name),"date-time":"start"}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},date:{template:"date",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},email:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},file:{template:"file",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){var n=t.attrs.label||"Select a file(s)",r="";a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,multiple:t.default.multiple,maxlength:t.rules.maxlength?t.rules.maxlength:"","ng-model":t.$modelName(t.name)}))(t.scope);var l=t.element.find(".view-file-name");r+='<ul class="view-file-list" ng-if="field.file[0]"><li ng-repeat="file in field.file"><div class="view-file-label">{{file.name || __("'+n+'")}}</div><div class="view-file-size" ng-if="file.size">{{file.size ? file.size + "KB" : ""}}</div></li></ul><div class="view-file-label" ng-if="!field.file[0]">{{__("'+n+'")}}</div>',a(l.append(r))(t.scope),l.on({click:function(e){e.preventDefault();var t;t=l.siblings('input[type="file"]').length>0?l.siblings('input[type="file"]').eq(0):l.children('input[type="file"]').eq(0),t.length>0&&t.click()}}).css("cursor","pointer"),l.children('input[type="file"]').on({click:function(e){e.stopPropagation()}})},scope:function(e,t){t.input.bind({change:function(e){var a=e.target.files;t.scope.field.file=a,t.scope.$apply();var n={field:t.$name,model:t.model,value:"",submiting:!1};n.value=t.default.multiple?a:a[0],t.$change(n)}}),t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,value:t.value,file:{},showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val(""),t.scope[t.name]={}}},month:{template:"month",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},number:{template:"number",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},password:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},radio:{template:"radio",type:"input",set:{data:function(e,t){if("object"!=typeof e){angular.forEach(t.innerElements,function(a,n){t.innerElements[n]["gr-checked"]=t.innerElements[n]["gr-value"]===e?!0:!1});var a=t.innerElements;angular.forEach(t.input,function(e,t){e=angular.element(e);var n=a[t].hasOwnProperty("gr-checked")&&a[t]["gr-checked"]===!0?!0:!1;n?e.attr("checked",!0):e.attr("checked",!1)}),t.value=e}},defaultData:function(e,t){if("object"==typeof e){t.default.innerElements=[];var a="";angular.forEach(e,function(e){var n="true"===e.checked||e.checked===!0||"1"===e.checked||1===e.checked?!0:!1;t.default.innerElements.push({"gr-label":e.label,"gr-value":e.value,"gr-checked":n}),n&&(a=e.value)}),t.default.value=a}else"string"==typeof e&&(angular.forEach(t.innerElements,function(a,n){t.innerElements[n]["gr-checked"]=t.innerElements[n]["gr-value"]===e?!0:!1}),t.default.value=e);t.innerElements=t.default.innerElements},attrs:function(e,n){t(function(){var t=n.element.find(".gr-form-list"),r=!1,l="",i=n.innerElements;angular.forEach(i,function(e,s){var o=e.hasOwnProperty("gr-checked")&&e["gr-checked"]===!0?!0:!1;o&&(r=!0,l=e["gr-value"]);var u="";u+='<div class="radio gr-form-list-item">',u+="<label>",u+="<input ",u+='type="'+n.attrs.type+'" ',u+='name="'+n.name+'" ',u+='gr-validator="'+n.validate+'" ',u+='ng-model="'+n.$modelName(n.name)+'" ',u+='checked="'+o+'" ',u+='value="'+i[s]["gr-value"]+'" ',u+="/>",u+=e["gr-label"],u+="</label>",u+="</div>",a(t.append(angular.element(u)))(n.scope)}),n.input=t.find('input[type="radio"]'),r&&(n.default.checked=!0,n.default.value=l)},100)},scope:function(e,t){t.scope.field={label:t.attrs.label},t.scope[t.name]=t.default.value}},reset:function(e,t){var n=t.default.innerElements;angular.forEach(t.input,function(e,t){e=angular.element(e);var a=n[t].hasOwnProperty("gr-checked")&&n[t]["gr-checked"]===!0?!0:!1;a?e.attr("checked",!0):e.attr("checked",!1)}),a(t.input)(t.scope)}},range:{template:"range",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},search:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},select:{template:"select",type:"select",set:{data:function(e,t){if("object"!=typeof e){angular.forEach(t.innerElements,function(a,n){t.innerElements[n]["gr-selected"]=t.innerElements[n]["gr-value"]===e?!0:!1});var a=t.innerElements,n=!1,r="";angular.forEach(t.input.children("option"),function(e,t){if(e=angular.element(e),t>0){var l=a[t-1].hasOwnProperty("gr-selected")&&a[t-1]["gr-selected"]===!0?!0:!1;l?(e.attr("selected",!0),n=!0,r=e.val()):e.attr("selected",!1)}}),n||(t.input.children("option").eq(0).attr("selected",!0),r=""),t.default.multiple&&t.input.attr("multiple",t.default.multiple),t.value=r}},defaultData:function(e,t){var a="";"object"==typeof e?(t.default.innerElements=[],angular.forEach(e,function(e){var n="true"===e.selected||e.selected===!0||"1"===e.selected||1===e.selected?!0:!1,r="true"===e.disabled||e.disabled===!0||"1"===e.disabled||1===e.disabled?!0:!1;t.default.innerElements.push({"gr-label":e.label,"gr-value":e.value,"gr-selected":n,"gr-disabled":r}),n&&(a=e.value)})):"string"==typeof e||"number"==typeof e?angular.forEach(t.default.innerElements,function(n,r){t.default.innerElements[r]["gr-value"]===e?(t.default.innerElements[r]["gr-selected"]=!0,a=e):t.default.innerElements[r]["gr-selected"]=!1}):angular.forEach(t.default.innerElements,function(e,n){t.default.innerElements[n]["gr-selected"]===!0?a=t.default.innerElements[n]["gr-value"]:t.default.innerElements[n]["gr-selected"]=!1}),t.default.value=a,t.innerElements=t.default.innerElements},attrs:function(e,t){var n=t.element.find("select"),r=t.innerElements,l=!1;angular.forEach(r,function(e){var i=e.hasOwnProperty("gr-selected")&&e["gr-selected"]===!0?!0:!1;i&&(l=!0);var s="";s+="<option ",s+='value="'+e["gr-value"]+'" ',s+='ng-selected="'+i+'" ',s+=(e.hasOwnProperty("gr-disabled")&&e["gr-disabled"]===!0?"disabled":"")+">",s+=e["gr-label"],s+="</option>",a(n.append(angular.element(s)))(t.scope)});var i='<option value="" ng-selected="'+(l?!1:!0)+'" disabled>'+t.attrs.label+"</option>";t.input=n,a(t.input.prepend(i).attr({name:t.name,"gr-validator":t.validate,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){var n,a=[],r=!1,l="";n=t.innerElements,angular.forEach(n,function(e){var t=e.hasOwnProperty("gr-selected")&&e["gr-selected"]===!0?!0:!1;t&&(r=!0,l=e["gr-value"]),a.push({label:e["gr-label"]})}),t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,options:a,hasSelected:r,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){var n=t.default.innerElements,r=!1;angular.forEach(t.input.children("option"),function(e,t){if(e=angular.element(e),t>0){var a=n[t-1].hasOwnProperty("gr-selected")&&n[t-1]["gr-selected"]===!0?!0:!1;a?(e.attr("selected",!0),r=!0):e.attr("selected",!1)}}),r||t.input.children("option").eq(0).attr("selected",!0),a(t.input)(t.scope)}},tel:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},textarea:{template:"textarea",type:"textarea",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val(t.default.value)}},text:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e,t.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":t.attrs.mask,placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.value}},reset:function(e,t){t.input.val(t.default.value)}},time:{template:"time",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},url:{template:"url",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},week:{template:"week",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}}};return n}]);
