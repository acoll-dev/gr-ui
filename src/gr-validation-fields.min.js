angular.module("grValidation.provider").factory("$grValidation.fields",["$injector","$timeout","$compile",function(e,t,a){var l={checkbox:{template:"checkbox",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value="true"===e||e===!0||"1"===e||1===e?!0:!1,t.model.$setViewValue(t.value),t.input.val(t.value),a(t.input.attr({"ng-checked":t.value}))(t.scope))},defaultData:function(e,t){"string"==typeof e&&(t.default.checked="true"===e||e===!0||"1"===e||1===e?!0:!1)},attrs:function(e,t){t.default.value=t.default.checked,a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"ng-checked":t.default.checked,"ng-model":t.$modelName(t.name),"ng-true-value":!0,"ng-false-value":!1}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType}}},reset:function(e,t){a(t.input.attr("ng-checked",t.default.checked))(t.scope)}},color:{template:"color",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},datetime:{template:"datetime",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},date:{template:"date",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},email:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},file:{template:"file",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){var l=t.attrs.label||"Select a file(s)",n="";a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,multiple:t.default.multiple,maxlength:t.rules.maxlength?t.rules.maxlength:"","ng-model":t.$modelName(t.name)}))(t.scope);var r=t.element.find(".view-file-name");t.default.multiple?(n+='<ul class="view-file-list" ng-if="field.file[0]">',n+='<li ng-repeat="file in field.file">',n+='<div class="view-file-label">',n+='{{file.name || __("'+l+'")}}',n+="</div>",n+='<div class="view-file-size">',n+='{{file.size ? file.size + "KB" : ""}}',n+="</div>",n+="</li>",n+="</ul>",n+='<div class="view-file-label" ng-if="!field.file[0]">{{__("'+l+'")}}</div>'):n+='<div class="view-file-label">{{field.file.name || __("'+l+'")}}</div><div class="view-file-size">{{field.file.size ? field.file.size + "KB" : ""}}</div>',a(r.append(n))(t.scope),r.on({click:function(e){e.preventDefault();var t;t=r.siblings('input[type="file"]').length>0?r.siblings('input[type="file"]').eq(0):r.children('input[type="file"]').eq(0),t.length>0&&t.click()}}).css("cursor","pointer"),r.children('input[type="file"]').on({click:function(e){e.stopPropagation()}})},scope:function(e,t){var a=function(e){for(var t=0;t<e.length;t++){var a=e[t];$scope.upload=$upload.upload({url:"server/upload/url",data:{myObj:$scope.myModelObj},file:a}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(e){console.log(e)})}};console.debug(t),t.input.bind({change:function(e){var a=e.target.files,l=[];angular.forEach(a,function(e){l.push(e.name)}),t.scope.file=a||void 0,t.scope.$apply(),t.scope.field[t.name]=l.length>1?l.join("; "):a[0],console.log(t.scope.field[t.name]),console.debug(a)}}),t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,value:t.value,file:{},onFileSelect:a,showLabel:"inline"===e.labelType},t.scope.field[t.name]=t.default.value}},reset:function(e,t){t.input.val(""),t.scope.field[t.name]={}}},month:{template:"month",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},number:{template:"number",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},password:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},radio:{template:"radio",type:"input",set:{data:function(e,t){if("object"!=typeof e){angular.forEach(t.innerElements,function(a,l){t.innerElements[l]["gr-checked"]=t.innerElements[l]["gr-value"]===e?!0:!1});var a=t.innerElements;angular.forEach(t.input,function(e,t){e=angular.element(e);var l=a[t].hasOwnProperty("gr-checked")&&a[t]["gr-checked"]===!0?!0:!1;l?e.attr("checked",!0):e.attr("checked",!1)}),t.value=e}},defaultData:function(e,t){if("object"==typeof e){t.default.innerElements=[];var a="";angular.forEach(e,function(e){var l="true"===e.checked||e.checked===!0||"1"===e.checked||1===e.checked?!0:!1;t.default.innerElements.push({"gr-label":e.label,"gr-value":e.value,"gr-checked":l}),l&&(a=e.value)}),t.default.value=a}else"string"==typeof e&&(angular.forEach(t.innerElements,function(a,l){t.innerElements[l]["gr-checked"]=t.innerElements[l]["gr-value"]===e?!0:!1}),t.default.value=e);t.innerElements=t.default.innerElements},attrs:function(e,l){t(function(){var t=l.element.find(".gr-form-list"),n=!1,r="",i=l.innerElements;angular.forEach(i,function(e,s){var u=e.hasOwnProperty("gr-checked")&&e["gr-checked"]===!0?!0:!1;u&&(n=!0,r=e["gr-value"]);var o="";o+='<div class="radio gr-form-list-item">',o+="<label>",o+="<input ",o+='type="'+l.attrs.type+'" ',o+='name="'+l.name+'" ',o+='gr-validator="'+l.validate+'" ',o+='ng-model="'+l.$modelName(l.name)+'" ',o+='checked="'+u+'" ',o+='value="'+i[s]["gr-value"]+'" ',o+="/>",o+=e["gr-label"],o+="</label>",o+="</div>",a(t.append(angular.element(o)))(l.scope)}),l.input=t.find('input[type="radio"]'),n&&(l.default.checked=!0,l.default.value=r)},100)},scope:function(e,t){t.scope.field={label:t.attrs.label},t.scope[t.name]=t.default.value}},reset:function(e,t){var l=t.default.innerElements;angular.forEach(t.input,function(e,t){e=angular.element(e);var a=l[t].hasOwnProperty("gr-checked")&&l[t]["gr-checked"]===!0?!0:!1;a?e.attr("checked",!0):e.attr("checked",!1)}),a(t.input)(t.scope)}},range:{template:"range",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},search:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},select:{template:"select",type:"select",set:{data:function(e,t){if("object"!=typeof e){angular.forEach(t.innerElements,function(a,l){t.innerElements[l]["gr-selected"]=t.innerElements[l]["gr-value"]===e?!0:!1});var a=t.innerElements,l=!1,n="";angular.forEach(t.input.children("option"),function(e,t){if(e=angular.element(e),t>0){var r=a[t-1].hasOwnProperty("gr-selected")&&a[t-1]["gr-selected"]===!0?!0:!1;r?(e.attr("selected",!0),l=!0,n=e.val()):e.attr("selected",!1)}}),l||(t.input.children("option").eq(0).attr("selected",!0),n=""),t.default.multiple&&t.input.attr("multiple",t.default.multiple),t.value=n}},defaultData:function(e,t){var a="";"object"==typeof e?(t.default.innerElements=[],angular.forEach(e,function(e){var l="true"===e.selected||e.selected===!0||"1"===e.selected||1===e.selected?!0:!1,n="true"===e.disabled||e.disabled===!0||"1"===e.disabled||1===e.disabled?!0:!1;t.default.innerElements.push({"gr-label":e.label,"gr-value":e.value,"gr-selected":l,"gr-disabled":n}),l&&(a=e.value)})):"string"==typeof e||"number"==typeof e?angular.forEach(t.default.innerElements,function(l,n){t.default.innerElements[n]["gr-value"]===e?(t.default.innerElements[n]["gr-selected"]=!0,a=e):t.default.innerElements[n]["gr-selected"]=!1}):angular.forEach(t.default.innerElements,function(e,l){t.default.innerElements[l]["gr-selected"]===!0?a=t.default.innerElements[l]["gr-value"]:t.default.innerElements[l]["gr-selected"]=!1}),t.default.value=a,t.innerElements=t.default.innerElements},attrs:function(e,t){var l=t.element.find("select"),n=t.innerElements,r=!1;angular.forEach(n,function(e){var i=e.hasOwnProperty("gr-selected")&&e["gr-selected"]===!0?!0:!1;i&&(r=!0);var s="";s+="<option ",s+='value="'+e["gr-value"]+'" ',s+='ng-selected="'+i+'" ',s+=(e.hasOwnProperty("gr-disabled")&&e["gr-disabled"]===!0?"disabled":"")+">",s+=e["gr-label"],s+="</option>",a(l.append(angular.element(s)))(t.scope)});var i='<option value="" ng-selected="'+(r?!1:!0)+'" disabled>'+t.attrs.label+"</option>";t.input=l,a(t.input.prepend(i).attr({name:t.name,"gr-validator":t.validate,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){var l,a=[],n=!1,r="";l=t.innerElements,angular.forEach(l,function(e){var t=e.hasOwnProperty("gr-selected")&&e["gr-selected"]===!0?!0:!1;t&&(n=!0,r=e["gr-value"]),a.push({label:e["gr-label"]})}),t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,options:a,hasSelected:n,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){var l=t.default.innerElements,n=!1;angular.forEach(t.input.children("option"),function(e,t){if(e=angular.element(e),t>0){var a=l[t-1].hasOwnProperty("gr-selected")&&l[t-1]["gr-selected"]===!0?!0:!1;a?(e.attr("selected",!0),n=!0):e.attr("selected",!1)}}),n||t.input.children("option").eq(0).attr("selected",!0),a(t.input)(t.scope)}},tel:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},textarea:{template:"textarea",type:"textarea",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val(t.default.value)}},text:{template:"text",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e,t.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":t.attrs.mask,placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.value}},reset:function(e,t){t.input.val(t.default.value)}},time:{template:"time",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},url:{template:"url",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}},week:{template:"week",type:"input",set:{data:function(e,t){"string"==typeof e&&(t.value=e,t.model.$setViewValue(t.value),t.input.val(t.value))},defaultData:function(e,t){"string"==typeof e&&(t.default.value=e)},attrs:function(e,t){a(t.input.attr({name:t.name,type:t.attrs.type,"gr-validator":t.validate,"gr-mask-pattern":"{{field.attrs.mask}}",placeholder:"placeholder"===e.labelType?t.attrs.label:"",maxlength:t.rules.maxlength?t.rules.maxlength:"","gr-value":t.default.value,"ng-model":t.$modelName(t.name)}))(t.scope)},scope:function(e,t){t.scope.field={type:t.attrs.type,label:t.attrs.label,icon:t.attrs.icon,mask:t.attrs.mask,showLabel:"inline"===e.labelType},t.scope[t.name]=t.default.value}},reset:function(e,t){t.input.val("")}}};return l}]);
